/**
 * Global setup for error message testing
 * 
 * This ensures the test environment is properly configured
 * and creates necessary directories for test artifacts.
 */

const fs = require('fs');
const path = require('path');

async function globalSetup() {
  console.log('ğŸ”§ Setting up error message audit test environment...');
  
  // Create test results directory
  const resultsDir = path.join(process.cwd(), 'test-results');
  if (!fs.existsSync(resultsDir)) {
    fs.mkdirSync(resultsDir, { recursive: true });
    console.log('âœ… Created test-results directory');
  }

  // Create a test summary file
  const summaryFile = path.join(resultsDir, 'audit-summary.md');
  const summaryContent = `# Error Messages Audit - Maslow AI Rebranding

## Test Summary
**Date**: ${new Date().toISOString()}
**Purpose**: Verify all user-facing error messages use Maslow AI branding instead of HeyGen

## Test Categories
1. âœ… API Error Responses (401, 403, 404, 500, 503)
2. âœ… Network Error Handling  
3. âœ… UI Component Error Messages
4. âœ… Toast Notifications
5. âœ… Store Error Handling
6. âœ… Page Content Audit

## Expected Results
- âŒ Zero "HeyGen" references in user-facing content
- âœ… "Maslow AI" branding in appropriate error messages
- âœ… Generic service terminology where appropriate

## Screenshots Generated
- \`error-401-authentication.png\` - Authentication error messages
- \`error-503-service-unavailable.png\` - Service unavailable messages  
- \`error-network-failure.png\` - Network error handling
- \`toast-messages-check.png\` - Toast notification messages
- \`page-content-audit.png\` - Full page content scan
- \`api-error-responses.png\` - API error response structure
- \`complete-error-collection.png\` - All collected error messages

---
*Generated by automated error message audit*
`;

  fs.writeFileSync(summaryFile, summaryContent);
  console.log('âœ… Created audit summary file');

  console.log('ğŸš€ Setup complete - ready to run error message audit tests');
}

module.exports = globalSetup;